<div class="bg-gray-50 min-h-screen pb-12">
  <!-- Navigation container -->
  <div class="w-full bg-white shadow-sm py-4 px-8 flex items-center">
    <button (click)="goBack()" class="mr-6 px-4 py-2 bg-gray-200 rounded hover:bg-gray-300">
      ← Retour
    </button>
    <span class="text-xl font-semibold text-gray-700">Détails de la tâche</span>
  </div>

  <div class="max-w-2xl mx-auto mt-8 bg-white rounded-xl shadow-lg p-8">
    <ng-container *ngIf="loading">
      <div>Chargement...</div>
    </ng-container>
    <ng-container *ngIf="error">
      <div class="text-red-500">{{ error }}</div>
    </ng-container>
    <ng-container *ngIf="!loading && !error && task">
      <!-- Header : titre + priorité + état -->
      <!-- Bloc 1 : Header -->
      <div class="flex items-start justify-between mb-8">
        <div>
          <h1 class="text-3xl font-bold text-blue-700 mb-1">{{ task.nom }}</h1>
          <div class="text-md text-gray-500 mb-0">{{ projetNom }}</div>
        </div>
        <div class="flex flex-col items-end gap-2">
          <div class="flex items-center gap-2">
            <span class="text-sm text-gray-500 font-medium">Priorité</span>
            <span class="text-2xl">
              <ng-container [ngSwitch]="task.priorite?.nom">
                <span *ngSwitchCase="'HAUTE'">🔴</span>
                <span *ngSwitchCase="'MOYENNE'">🟠</span>
                <span *ngSwitchCase="'BASSE'">🟢</span>
                <span *ngSwitchDefault>⚪</span>
              </ng-container>
            </span>
            <span class="text-base text-gray-700">{{ task.priorite?.nom }}</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-sm text-gray-500 font-medium">État</span>
            <input type="checkbox" [checked]="task.est_termine" class="h-5 w-5 accent-blue-500 rounded" disabled/>
            <span class="text-xs text-gray-500">{{ task.est_termine ? 'Terminée' : 'En cours' }}</span>
          </div>
        </div>
      </div>
      <hr class="my-6 border-gray-200">
      <!-- Bloc 2 : Infos clés -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-10">
        <div>
          <div class="text-sm text-gray-500 font-medium mb-1">Commanditaire</div>
          <div class="text-gray-700">{{ task.commanditaire?.nom || task.commanditaire?.id }}</div>
        </div>
        <div>
          <div class="text-sm text-gray-500 font-medium mb-1">Destinataire</div>
          <div class="text-gray-700">{{ task.destinataire?.nom || task.destinataire?.id }}</div>
        </div>
        <div>
          <div class="text-sm text-gray-500 font-medium mb-1">Date de début</div>
          <div class="text-gray-700">{{ task.date_debut }}</div>
        </div>
        <div>
          <div class="text-sm text-gray-500 font-medium mb-1">Date de fin</div>
          <div class="text-gray-700">{{ task.date_fin }}</div>
        </div>
      </div>
      <hr class="my-6 border-gray-200">
      <!-- Bloc 3 : Description -->
      <div class="mb-2">
        <div class="text-sm text-gray-500 font-medium mb-1">Description</div>
        <div class="text-gray-800 text-base bg-gray-50 rounded px-4 py-2">
          {{ task.description }}
        </div>
      </div>
      <!-- Bloc interactif (optionnel) -->
      <!-- <div class="mt-8">
        <app-task [task]="task" mode="detail"></app-task>
      </div> -->
    </ng-container>
  </div>
</div>
